Factory template code with auto registration of factory object types.

you can build debug code as follows:

```
mkdir Debug
cd Debug
cmake -DCMAKE_BUILD_TYPE=Debug ..
make
```

you can run this code as follows:
```
./tests/runTests
```

